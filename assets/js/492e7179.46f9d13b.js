"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6409],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>h});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=r.createContext({}),c=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},l=function(e){var t=c(e.components);return r.createElement(p.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,p=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=c(n),m=i,h=d["".concat(p,".").concat(m)]||d[m]||u[m]||a;return n?r.createElement(h,o(o({ref:t},l),{},{components:n})):r.createElement(h,o({ref:t},l))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=m;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s[d]="string"==typeof e?e:i,o[1]=s;for(var c=2;c<a;c++)o[c]=n[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2979:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>p,default:()=>m,frontMatter:()=>s,metadata:()=>c,toc:()=>d});var r=n(7462),i=n(3366),a=(n(7294),n(3905)),o=["components"],s={id:"encrypted-envelope",title:"Encrypted Envelope",sidebar_label:"Encrypted Envelope"},p=void 0,c={unversionedId:"dta-details/encrypted-envelope",id:"dta-details/encrypted-envelope",title:"Encrypted Envelope",description:'The Milagro D-TA enables Principals (who require secrets to be safeguarded) to communicate with Fiduciaries who provide custodian services for those secrets. To facilitate these transactions communication between the parties must be secure i.e., must have privacy, authentication, non-repudiation and message integrity. The Milagro D-TA delivers this using its "Encrypted Envelope" messaging format.',source:"@site/../docs/dta-details/encrypted-envelope.md",sourceDirName:"dta-details",slug:"/dta-details/encrypted-envelope",permalink:"/docs/dta-details/encrypted-envelope",draft:!1,tags:[],version:"current",frontMatter:{id:"encrypted-envelope",title:"Encrypted Envelope",sidebar_label:"Encrypted Envelope"},sidebar:"docs",previous:{title:"Identity Documents",permalink:"/docs/dta-details/identity-documents"},next:{title:"IPFS",permalink:"/docs/dta-details/ipfs"}},l={},d=[{value:"Overview",id:"overview",level:2},{value:"Multipart Messages",id:"multipart-messages",level:2}],u={toc:d};function m(e){var t=e.components,s=(0,i.Z)(e,o);return(0,a.kt)("wrapper",(0,r.Z)({},u,s,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,'The Milagro D-TA enables Principals (who require secrets to be safeguarded) to communicate with Fiduciaries who provide custodian services for those secrets. To facilitate these transactions communication between the parties must be secure i.e., must have privacy, authentication, non-repudiation and message integrity. The Milagro D-TA delivers this using its "Encrypted Envelope" messaging format.'),(0,a.kt)("admonition",{title:"The Milagro D-TA Encrypted Envelope format is conceptually similar to S/MIME and its cryptographic message format.",type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"For more information about ",(0,a.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/S/MIME"},"S/MIME, click here"),".")),(0,a.kt)("h2",{id:"overview"},"Overview"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"The message consists of a header and body."),(0,a.kt)("li",{parentName:"ol"},"The message body is encrypted with an AES key."),(0,a.kt)("li",{parentName:"ol"},'The AES key for decrypting ciphertext is "encapsulated" i.e. encrypted using each recipient\'s public key.'),(0,a.kt)("li",{parentName:"ol"},"The sender signs the message."),(0,a.kt)("li",{parentName:"ol"},"The message header contains a list of each recipient's encrypted version of the key."),(0,a.kt)("li",{parentName:"ol"},"The message is pushed to IPFS and the IPFS address hash is sent to the recipients."),(0,a.kt)("li",{parentName:"ol"},"The recipients verify the signature and then read the message."),(0,a.kt)("li",{parentName:"ol"},"Only recipients with the matching secret keys can decrypt the AES key and use it to read the encrypted message bodies.")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Figure 3",src:n(4695).Z,width:"760",height:"700"})),(0,a.kt)("admonition",{title:"Post Quantum Cryptography",type:"note"},(0,a.kt)("p",{parentName:"admonition"},"At the time of writing the Milagro D-TA implements cryptographic routines from the ",(0,a.kt)("a",{parentName:"p",href:"https://csrc.nist.gov/Projects/Post-Quantum-Cryptography/Round-2-Submissions"},"NIST Post-Quantum Cryptography Standardization Project"),"."),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://sike.org/"},"SIKE")," - key encapsulation\nThis implementation is currently under review.\n:::"))),(0,a.kt)("p",null,"Milagro D-TAs use ",(0,a.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Boneh%E2%80%93Lynn%E2%80%93Shacham"},"BLS signatures")," to sign encrypted envelopes.\n:::"),(0,a.kt)("h2",{id:"multipart-messages"},"Multipart Messages"),(0,a.kt)("p",null,"The Milagro D-TA's Encrypted Envelopes are designed to facilitate a dialogue between the Principal, Fiduciary and Beneficiaries. Requests and responses are appended to the original document and published back to IPFS which returns new HASH address. "),(0,a.kt)("p",null,"In this way, an immutable copy of each transaction is maintained, but the intended recipients can view the entire history of the transaction if they have the required decryption keys. Each message can be seen within each update, providing additional assurance and verification and reducing round trips to IPFS."))}m.isMDXComponent=!0},4695:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/Envelope-2b64b60c67dc11eaa0e9f62058ff4134.png"}}]);